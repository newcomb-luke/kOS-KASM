<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Running KASM - KASM Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="chapter_2.html" class="active"><strong aria-hidden="true">2.</strong> Running KASM</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">3.</strong> KASM Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_3_1.html"><strong aria-hidden="true">3.1.</strong> For Beginners</a></li><li class="chapter-item expanded "><a href="chapter_3_2.html"><strong aria-hidden="true">3.2.</strong> Basic Syntax</a></li><li class="chapter-item expanded "><a href="chapter_3_3.html"><strong aria-hidden="true">3.3.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="chapter_3_4.html"><strong aria-hidden="true">3.4.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="chapter_3_5.html"><strong aria-hidden="true">3.5.</strong> Full Instructions List</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_4.html"><strong aria-hidden="true">4.</strong> KASM Preprocessor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_4_1.html"><strong aria-hidden="true">4.1.</strong> Definitions</a></li><li class="chapter-item expanded "><a href="chapter_4_2.html"><strong aria-hidden="true">4.2.</strong> Macros</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">5.</strong> Assembler Directives</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_5_1.html"><strong aria-hidden="true">5.1.</strong> Include Directive</a></li><li class="chapter-item expanded "><a href="chapter_5_2.html"><strong aria-hidden="true">5.2.</strong> If* Directives</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_6.html"><strong aria-hidden="true">6.</strong> Output</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">KASM Documentation</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#chapter-2-running-kasm" id="chapter-2-running-kasm">Chapter 2: Running KASM</a></h1>
<h2><a class="header" href="#main-operation" id="main-operation">Main Operation</a></h2>
<p>To assemble a file, you issue a command of the form:</p>
<pre><code>kasm &lt;filename&gt; [options]
</code></pre>
<p>For example:</p>
<pre><code>kasm myfile.kasm
</code></pre>
<p>will assemble <code>myfile.kasm</code> into a KO object file <code>myfile.ko</code></p>
<h2><a class="header" href="#creating-an-executable" id="creating-an-executable">Creating an Executable</a></h2>
<p>Because KASM is just an assembler, and it produces a non-executable file, readers of this may be wondering how to create a file they can run in kOS.</p>
<p>See <a href="https://github.com/newcomb-luke/kOS-KLinker">KLinker</a>.</p>
<p>If you already have KLinker installed, then in order to create an executable from one single file, run:</p>
<pre><code>kasm myfile.kasm
klinker myfile.ko -o program.ksm
</code></pre>
<p>The produced <code>program.ksm</code> file can then be run in kOS just like any other file.</p>
<h2><a class="header" href="#options" id="options">Options</a></h2>
<p>To get further usage instructions from KASM itself, run:</p>
<pre><code>kasm --help
</code></pre>
<h4><a class="header" href="#the--o-option-specifying-the-output-file-name" id="the--o-option-specifying-the-output-file-name">The <code>-o</code> Option: Specifying the Output File Name</a></h4>
<p>KASM will normally choose the output file for you. By default, KASM will strip the <code>.kasm</code> extension from the filename, and store the output file with a <code>.ko</code> extension in the same directory as the input file.</p>
<p>If the output file already exists, KASM will overwrite it. Only the output extension of <code>.ko</code> is allowed.</p>
<p>For situations in which the output file needs to be placed in a seperate directory, or needs to be named differently, KASM provides the <code>-o</code> command-line option, which allows you to specify your desired output path or file name.</p>
<p>For example:</p>
<pre><code>kasm main_program.kasm -o game.ko
</code></pre>
<p>This will produce an output file named <code>game.ko</code> in the current working directory.</p>
<h4><a class="header" href="#the--i-option-specifying-the-include-directory" id="the--i-option-specifying-the-include-directory">The <code>-i</code> Option: Specifying the Include Directory</a></h4>
<p>KASM contains a preprocessor which allows the user to include source code from other files into the file that is being assembled. Normally KASM looks for these other files in a path relative to the source <code>.kasm</code> file's directory. Sometimes one might want a common place for commonly used source code such as macro definitions. Instead of having to copy all of those files to the source code's directory, KASM allows a different include path to be chosen.</p>
<p>This can be done with the <code>-i</code> command line option:</p>
<p>Mac/Linux:</p>
<pre><code>kasm fancycode.kasm -i ../macros/
</code></pre>
<p>Windows:</p>
<pre><code>kasm fancycode.kasm -i ..\macros\
</code></pre>
<h4><a class="header" href="#the--f-option-specifying-the-file-symbol-name" id="the--f-option-specifying-the-file-symbol-name">The <code>-f</code> Option: Specifying the File Symbol Name</a></h4>
<p>Normally KASM outputs to the KerbalObject file format, which stores the source file's name to be referenced later in the case of any errors. This defaults to the current file name, but in the case of implementing an intermediary between the user and KASM such as a compiler, a different source file name should be displayed.</p>
<p>This can be done through the <code>-f</code> option:</p>
<pre><code>kasm compiled.kasm -f compiled.someother
</code></pre>
<p>Now errors will be reported as coming from the <code>compiled.someother</code> file.</p>
<h4><a class="header" href="#the--c-option-specifying-the-executable-comment" id="the--c-option-specifying-the-executable-comment">The <code>-c</code> Option: Specifying the Executable Comment</a></h4>
<p>When the output KerbalObject file is linked and an executable file is created, a comment is left in the generated KSM file that explains how the file was created. This can be read using a utility such as <a href="https://github.com/newcomb-luke/KDump">KDump</a> and then the recipient of the file can see what program compiled the code.</p>
<p>An example comment would currently be: <code>Assembled by KASM v0.9.9</code></p>
<p>Any message can be specified as follows:</p>
<pre><code>kasm program.kasm -c &quot;KASM is pretty neat, yo&quot;
</code></pre>
<h2><a class="header" href="#flags" id="flags">Flags</a></h2>
<p>KASM has only 3 flags:</p>
<ul>
<li><code>-h</code>, <code>--help</code> which prints the help menu</li>
<li><code>-V</code>, <code>--version</code> which prints the current KASM version</li>
<li><code>-p</code>, <code>--preprocess-only</code> which only runs the KASM preprocessor.</li>
</ul>
<h4><a class="header" href="#the--p-flag-running-in-preprocess-only-mode" id="the--p-flag-running-in-preprocess-only-mode">The <code>-p</code> Flag: Running in Preprocess Only Mode</a></h4>
<p>KASM has a fairly powerful preprocessor which can be used to write code that the assembler can use to generate the code that will eventually make its way into the finished program. These include macros, definitions, and other KASM directives. There can be a situation where it might be useful to check the output of the preprocessor, but not after the program is assembled.</p>
<p>KASM supports running in preprocessor only mode, which runs the preprocessor and outputs a <code>.kasm</code> source file with all macros and definitions expanded.</p>
<p>For example:</p>
<pre><code>kasm test.kasm -p
</code></pre>
<p>This will create a file named <code>test_preprocessed.kasm</code> in the current working directory that contains the source from <code>test.kasm</code> after the preprocessor has run.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="chapter_1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="chapter_3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="chapter_1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="chapter_3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
