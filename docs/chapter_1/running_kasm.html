<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Running KASM - KASM Guide</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction/introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../installation/installation.html">Installation</a></li><li class="chapter-item expanded "><a href="../chapter_1/running_kasm.html" class="active"><strong aria-hidden="true">1.</strong> Running KASM</a></li><li class="chapter-item expanded "><a href="../chapter_2/kasm_language.html"><strong aria-hidden="true">2.</strong> KASM Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_2/for_beginners.html"><strong aria-hidden="true">2.1.</strong> For Beginners</a></li><li class="chapter-item expanded "><a href="../chapter_2/basic_syntax.html"><strong aria-hidden="true">2.2.</strong> Basic Syntax</a></li><li class="chapter-item expanded "><a href="../chapter_2/data_types.html"><strong aria-hidden="true">2.3.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../chapter_2/expressions.html"><strong aria-hidden="true">2.4.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="../chapter_2/instructions_list.html"><strong aria-hidden="true">2.5.</strong> Full Instruction List</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_3/kasm_preprocessor.html"><strong aria-hidden="true">3.</strong> KASM Preprocessor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_3/single_line_macros.html"><strong aria-hidden="true">3.1.</strong> Single-Line Macros</a></li><li class="chapter-item expanded "><a href="../chapter_3/multi_line_macros.html"><strong aria-hidden="true">3.2.</strong> Multi-Line Macros</a></li><li class="chapter-item expanded "><a href="../chapter_3/repeats.html"><strong aria-hidden="true">3.3.</strong> Repeats</a></li><li class="chapter-item expanded "><a href="../chapter_3/include.html"><strong aria-hidden="true">3.4.</strong> Include</a></li><li class="chapter-item expanded "><a href="../chapter_3/if_directives.html"><strong aria-hidden="true">3.5.</strong> If* Directives</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_4/assembly_directives.html"><strong aria-hidden="true">4.</strong> Assembly Directives</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_4/sections.html"><strong aria-hidden="true">4.1.</strong> Sections</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_5/tutorial.html"><strong aria-hidden="true">5.</strong> Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_5/hello_world.html"><strong aria-hidden="true">5.1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../chapter_5/launch.html"><strong aria-hidden="true">5.2.</strong> Launch</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Advanced Tutorial</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">KASM Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="chapter-1-running-kasm"><a class="header" href="#chapter-1-running-kasm">Chapter 1: Running KASM</a></h1>
<p>The Kerbal Assembler can be invoked after installation simply as <code>kasm</code></p>
<p>Help can be accessed from the program itself by running:</p>
<pre><code>kasm --help
</code></pre>
<p>The basic format for invoking <code>kasm</code> is:</p>
<pre><code>kasm [FLAGS] [OPTIONS] &lt;INPUT&gt; --output &lt;OUTPUT&gt;
</code></pre>
<h2 id="main-operation"><a class="header" href="#main-operation">Main Operation</a></h2>
<p>To assemble a file of source code issue a command of the form:</p>
<pre><code>kasm &lt;filename&gt; &lt;options&gt;
</code></pre>
<p>For example, if your code was in a file called <code>myfile.kasm</code>:</p>
<pre><code>kasm myfile.kasm -o myfile.ko
</code></pre>
<p>This will assemble <code>myfile.kasm</code> into a KerbalObject file called <code>myfile.ko</code></p>
<h2 id="creating-an-executable"><a class="header" href="#creating-an-executable">Creating an Executable</a></h2>
<p>Because KASM is just an assembler, and it produces a non-executable file, readers
of this may be wondering how to create a file they can run in kOS.</p>
<p>In order to that, another tool called <a href="https://github.com/newcomb-luke/kOS-KLinker">KLinker</a> is required. When installing KASM on Windows
a separate &quot;full&quot; installer contains KLinker as well as a useful tool called <a href="https://github.com/newcomb-luke/KDump">KDump</a>.</p>
<p>If you have KLinker installed then in order to create a file that can be run in kOS you can run the following two commands:</p>
<pre><code>kasm myfile.kasm -o myfile.ko
kld myfile.ko -o program.ksm
</code></pre>
<p>The produced <code>program.ksm</code> file can be run in kOS just like any other file.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<h4 id="the--o-option-specifying-the-output-file-name"><a class="header" href="#the--o-option-specifying-the-output-file-name">The <code>-o</code> option: Specifying the output file name</a></h4>
<p>KASM requires you to specify the output file path</p>
<p>If the output file already exists, KASM will overwrite it. KASM will by default look in the current working directory where <strong>kasm</strong> is run.
Although a different directory can be specified as either an absolute or relative path:</p>
<pre><code>kasm main_program.kasm -o ~/&lt;KSP Directory&gt;/game.ko
</code></pre>
<p>This will produce an output file named <code>game.ko</code> in your KSP directory that you fill in.</p>
<h4 id="the--i-option-specifying-the-include-directory-path"><a class="header" href="#the--i-option-specifying-the-include-directory-path">The <code>-i</code> option: Specifying the include directory path</a></h4>
<p>By default when the KASM preprocessor is executing <a href="">include directives</a> it looks in the same directory in which the source file is.</p>
<p>If you are including many different files, it may be in your interests to organize those files into a directory called <code>include</code> in your project folder.</p>
<p>KASM allows you to still run the <strong>kasm</strong> command where you did before, but specify the include directory as <code>include</code>.</p>
<p>This can be done using the <strong>-i</strong> option:</p>
<p>MacOS/Linux: </p>
<pre><code>kasm fancycode.kasm -i ./include/ ...
</code></pre>
<p>Windows:</p>
<pre><code>kasm fancycode.kasm -i .\macros\ ...
</code></pre>
<h4 id="the--f-option-setting-the-file-symbol-name"><a class="header" href="#the--f-option-setting-the-file-symbol-name">The <code>-f</code> option: Setting the file symbol name</a></h4>
<p>Normally KASM outputs to the KerbalObject file format, which stores the source file's name to be referenced later
in the case of any errors. This defaults to the current input file name, but in the case of implementing an intermediary between
the user and KASM such as a compiler, a different source file name should be displayed.</p>
<p>In a hypothetical scenario let's say we have a compiler for a language called Yes Language where the files have <code>.yl</code> extensions: <code>program.yl</code></p>
<p>This compiler produces KASM source code which is assembled using <strong>kasm</strong>.</p>
<p>This can be specified so that later error messages use the <code>.yl</code> extension using the <strong>-f</strong> option:</p>
<pre><code>kasm program.kasm -f program.yl ...
</code></pre>
<p>Now errors in the linker will be reported as coming from <code>program.yl</code> so that it is less confusing for the end user.</p>
<h4 id="the--c-option-the-executable-comment"><a class="header" href="#the--c-option-the-executable-comment">The <code>-c</code> option: The executable comment</a></h4>
<p>When the output KerbalObject file is linked and an executable file is created, a comment is left in the generated KSM
file that explains how the file was created. This can be read using a utility such as KDump and then the recipient of
the file can see what program compiled the code.</p>
<p>An example comment would currently be: <code>Compiled by KASM 0.11.0</code></p>
<p>Any message can be displayed though with the <code>-c</code> option:</p>
<pre><code>kasm program.kasm -c &quot;KASM is pretty neat, yo&quot; ...
</code></pre>
<ul>
<li><strong>Note</strong>: The comment will only show up in the final .ksm file created by KLinker if the file has the program entry point (either <code>_start:</code> or <code>_init:</code>)</li>
</ul>
<h2 id="flags"><a class="header" href="#flags">Flags</a></h2>
<p>KASM can also be passed flags that have no value following them that tell KASM what to do.</p>
<h4 id="-w-flag"><a class="header" href="#-w-flag"><code>-w</code> flag</a></h4>
<p>In some cases KASM will notice something about your code that does not make it incorrect, but may not be what you want to do. These are
printed out as warnings, and in some cases you may not want to see them.</p>
<p>Then the <strong>-w</strong> flag can be used to supress warnings and only display errors:</p>
<pre><code>kasm -w program.kasm ...
</code></pre>
<h4 id="-a-flag"><a class="header" href="#-a-flag"><code>-a</code> flag</a></h4>
<p>KASM has a fairly capable set of preprocessor directives, but running the preprocessor may make <strong>kasm</strong> run slower if you
are giving it a large amount of code. If you are <em>not</em> using preprocessor directives, then you may choose to tell KASM to
not run the preprocessor at all.</p>
<p>This can be done by passing <strong>kasm</strong> the <strong>-a</strong> flag:</p>
<pre><code>kasm -a program.kasm ...
</code></pre>
<h4 id="-p-flag"><a class="header" href="#-p-flag"><code>-p</code> flag</a></h4>
<p>In contrast to the <strong>-a</strong> flag, the <strong>-p</strong> flag can be used to tell KASM that you want it to <em>only</em> run the preprocessor.
This can be useful in some cases for debugging or simply wanting all of the code to be the final code that would be in the KSM file.</p>
<pre><code>kasm -p program.kasm -o output.kasm ...
</code></pre>
<h2 id="output-format"><a class="header" href="#output-format">Output Format</a></h2>
<p>KASM outputs in a file format called KO, or Kerbal Object file format.</p>
<p>This format is used by the linker to link multiple parts of a program together that were in seperate source files.</p>
<p>These files can be viewed using a program called <a href="https://github.com/newcomb-luke/KDump">KDump</a>, as well as finished KSM files.</p>
<p>KO files must be passed to the <a href="https://github.com/newcomb-luke/kOS-KLinker">linker</a> in order to become executable by kOS.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../installation/installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../chapter_2/kasm_language.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../installation/installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../chapter_2/kasm_language.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
